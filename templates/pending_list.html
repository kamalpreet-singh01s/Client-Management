{%extends "index.html"%}

{%block content%}
{%- for category, message in get_flashed_messages(with_categories = true) %}
<span style="width:50px;">
<!--    <li class="p-1 mb-1 bg-danger text-white">{{ message }}</li>-->
    {%if category== 'success'%}
        <li class="p-1 mb-1 bg-success text-white">{{ message }}</li>
    {%else%}
        <li class="p-1 mb-1 bg-danger text-white">{{ message }}</li>
    {%endif%}

</span>
{%- endfor %}

<style>
           table {
            counter-reset: 1;
        }

        table tr {
            counter-increment: rowNumber;
        }

        table tr td:first-child::before {
            content: counter(rowNumber);

        }
</style>

<br>


<h4 style="text-align:center">Pending Payments</h4>
<br>


<div  style="margin:auto" class="d-grid gap-2 col-11 mx-auto">
    <div style="overflow-y:scroll; height:200px; margin-left:10px">
        <table class="table table-hover table-sortable">
            <thead>
            <tr>
                <th>S.No.</th>
                <th>Client</th>
                <th>Bill No.</th>
                <th>Bill Date</th>
                <th>RO Date</th>
                <th>DoP</th>
                <th>AD/GP/Others.</th>
                <th>Deal (Rs.)</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody>
            {% for pending in pending_list %}
            <tr>
                <td></td>
                <td style="cursor: pointer;"
                    onclick="location.href='{{ url_for('record_details', record_id = pending.id) }}'">{{ pending.client_name.client_name }}</td>
                <td style="cursor: pointer;"
                    onclick="location.href='{{ url_for('record_details', record_id = pending.id) }}'">{{ pending.bill }}</td>
                <td style="cursor: pointer;"
                    onclick="location.href='{{ url_for('record_details', record_id = pending.id) }}'">{{ pending.bill_date }}</td>
                <td style="cursor: pointer;"
                    onclick="location.href='{{ url_for('record_details', record_id = pending.id) }}'">{{ pending.date_of_order }}</td>

                <td style="cursor: pointer;"
                    onclick="location.href='{{ url_for('record_details', record_id = pending.id) }}'">{{ pending.dop }}</td>
                <td style="cursor: pointer;"
                    onclick="location.href='{{ url_for('record_details', record_id = pending.id) }}'">{{ pending.content_advt }}</td>
                 <td style="cursor: pointer;"
                    onclick="location.href='{{ url_for('record_details', record_id = pending.id) }}'">{{ pending.client_name.final_deal }}</td>



                <td style="color:red; font-weight:600; cursor: pointer;"
                    onclick="location.href='{{ url_for('record_details', record_id = pending.id) }}'" class="status">{{ pending.status_name.status_name }}</td>

            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <hr>
    <div class="d-flex justify-content-end" style="margin-right:50px">
        <h6>Pending Total: Rs. {{total}}</h6>
    </div>

</div>

{%endblock%}